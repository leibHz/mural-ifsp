# ğŸ“ PROMPT PARA CONTINUAR - Mural IFSP

## ğŸ“‹ CONTEXTO DO PROJETO

Estou desenvolvendo um **Mural sobre ViolÃªncia Escolar do IFSP BraganÃ§a Paulista**. Ã‰ uma plataforma estilo Twitter onde estudantes podem postar denÃºncias usando vÃ­deos, fotos, GIFs, PDFs, Ã¡udios e textos (TODOS com descriÃ§Ã£o obrigatÃ³ria).

### âœ… FASE 1 COMPLETA (jÃ¡ feita)
- Estrutura do projeto React + Vite configurada
- Banco de dados Supabase estruturado (todas as tabelas criadas)
- Cliente Supabase configurado
- Estilos globais com tema escuro + verde IFSP (#0B6623)
- 30+ animaÃ§Ãµes CSS prontas (glassmorphism, hover effects, etc)
- Sistema de rotas bÃ¡sico
- Todas as constantes e configuraÃ§Ãµes

### ğŸ“ Estrutura de Arquivos Criados
```
mural-ifsp/
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.js
â”œâ”€â”€ vercel.json
â”œâ”€â”€ .env.example
â”œâ”€â”€ .gitignore
â”œâ”€â”€ index.html
â”œâ”€â”€ database-schema.sql (executado no Supabase)
â””â”€â”€ src/
    â”œâ”€â”€ main.jsx
    â”œâ”€â”€ App.jsx
    â”œâ”€â”€ services/
    â”‚   â””â”€â”€ supabase.js (configurado)
    â”œâ”€â”€ utils/
    â”‚   â””â”€â”€ constants.js (completo)
    â””â”€â”€ styles/
        â”œâ”€â”€ global.css (completo)
        â””â”€â”€ animations.css (completo)
```

---

## ğŸ¯ PRÃ“XIMA FASE: SISTEMA DE AUTENTICAÃ‡ÃƒO

Preciso que vocÃª crie a **Fase 2: Sistema de AutenticaÃ§Ã£o** com os seguintes arquivos:

### Arquivos NecessÃ¡rios:

#### 1. **src/services/auth.js**
- FunÃ§Ãµes de login (estudante e visitante)
- Registro de estudante (com BP - prontuÃ¡rio no formato BRG12345)
- Registro de visitante (com cÃ³digo de verificaÃ§Ã£o de 4 dÃ­gitos enviado por email)
- VerificaÃ§Ã£o de email
- Logout
- RecuperaÃ§Ã£o de senha
- ValidaÃ§Ã£o de sessÃ£o

#### 2. **src/utils/validators.js**
- Validar email
- Validar BP (formato: BRG + 5 dÃ­gitos, ex: BRG12345)
- Validar senha (mÃ­nimo 8 caracteres)
- Validar nome de usuÃ¡rio (3-30 caracteres, apenas letras, nÃºmeros e underscore)
- Validar cÃ³digo de verificaÃ§Ã£o (4 dÃ­gitos)

#### 3. **src/hooks/useAuth.js**
- Hook customizado para gerenciar autenticaÃ§Ã£o
- Estado do usuÃ¡rio logado
- FunÃ§Ãµes de login/logout
- Verificar se Ã© admin
- Persistir sessÃ£o

#### 4. **src/components/auth/LoginForm.jsx**
- FormulÃ¡rio de login
- Campos: email e senha
- OpÃ§Ã£o "Esqueci minha senha"
- Link para cadastro
- AnimaÃ§Ãµes e validaÃ§Ãµes

#### 5. **src/components/auth/RegisterForm.jsx**
- FormulÃ¡rio com DUAS ABAS:
  - **Aba 1:** Estudante (pede BP, nome real, email, nome de usuÃ¡rio, senha)
  - **Aba 2:** Visitante (pede apenas email, nome de usuÃ¡rio, senha)
- ValidaÃ§Ãµes em tempo real
- Envio de cÃ³digo para visitantes

#### 6. **src/components/auth/VerificationCode.jsx**
- Input para cÃ³digo de 4 dÃ­gitos
- Timer de expiraÃ§Ã£o (15 minutos)
- OpÃ§Ã£o de reenviar cÃ³digo
- AnimaÃ§Ãµes

#### 7. **src/pages/Login.jsx**
- PÃ¡gina completa de login
- Logo IFSP
- LoginForm
- Design com glassmorphism

#### 8. **src/pages/Register.jsx**
- PÃ¡gina completa de cadastro
- Logo IFSP
- RegisterForm
- Design com glassmorphism

---

## âš™ï¸ REGRAS IMPORTANTES

### AutenticaÃ§Ã£o
- **Estudante:** Precisa de BP (prontuÃ¡rio), nome real, email institucional (opcional validar @ifsp.edu.br), nome de usuÃ¡rio e senha
- **Visitante:** Precisa de email, nome de usuÃ¡rio e senha + verificaÃ§Ã£o por cÃ³digo de 4 dÃ­gitos
- CÃ³digo expira em 15 minutos
- SessÃ£o expira em 24 horas

### Banco de Dados (Tabela `usuarios`)
```sql
usuarios (
  id UUID,
  tipo_usuario VARCHAR ('estudante' | 'visitante'),
  nome_usuario VARCHAR UNIQUE,
  email VARCHAR UNIQUE,
  senha_hash VARCHAR,
  nome_real VARCHAR (apenas estudantes),
  bp VARCHAR (apenas estudantes),
  email_verificado BOOLEAN,
  codigo_verificacao VARCHAR(4),
  codigo_expiracao TIMESTAMP,
  banido BOOLEAN,
  foto_perfil_url TEXT
)
```

### Design
- **Cores:** Verde IFSP (#0B6623, #0E8B2F, #054A1A) predominante
- **Fundo:** Tema escuro (#0F0F0F, #1A1A1A)
- **Efeitos:** Glassmorphism, animaÃ§Ãµes suaves, hover effects
- **NÃƒO USE TAILWIND CSS** - apenas CSS puro/modules ou styled-components
- Use as classes do global.css jÃ¡ criado (.btn, .card, .input, etc)

### Tecnologias
- React 18
- Supabase Auth
- React Router DOM
- Framer Motion (para animaÃ§Ãµes avanÃ§adas se necessÃ¡rio)
- React Hot Toast (notificaÃ§Ãµes)
- Zustand (gerenciamento de estado)

---

## ğŸ“ EXEMPLO DE ESTRUTURA

### Login Flow:
1. UsuÃ¡rio acessa /login
2. Digita email e senha
3. Sistema valida credenciais no Supabase
4. Se correto â†’ redireciona para /
5. Se incorreto â†’ mostra erro com animaÃ§Ã£o shake

### Registro Estudante:
1. Escolhe aba "Estudante"
2. Preenche: BP, nome real, email, nome de usuÃ¡rio, senha
3. Sistema valida BP (formato BRG12345)
4. Cria conta no Supabase
5. Envia email de boas-vindas
6. Redireciona para login

### Registro Visitante:
1. Escolhe aba "Visitante"
2. Preenche: email, nome de usuÃ¡rio, senha
3. Sistema envia cÃ³digo de 4 dÃ­gitos por email
4. Mostra tela de verificaÃ§Ã£o
5. UsuÃ¡rio digita cÃ³digo
6. Se correto â†’ conta ativada
7. Redireciona para login

---

## ğŸ” SEGURANÃ‡A

- Sempre use bcrypt ou Supabase Auth para senhas
- Valide TODOS os inputs no frontend E backend
- Use Row Level Security (RLS) do Supabase
- NÃ£o exponha informaÃ§Ãµes sensÃ­veis
- Sanitize dados de usuÃ¡rios
- Implemente rate limiting para login

---

## ğŸ¨ COMPONENTES REUTILIZÃVEIS JÃ PRONTOS

Use as classes CSS jÃ¡ criadas:
```html
<!-- BotÃµes -->
<button className="btn btn-primary">Entrar</button>

<!-- Inputs -->
<input className="input" placeholder="Email" />

<!-- Cards -->
<div className="card glass">ConteÃºdo</div>

<!-- AnimaÃ§Ãµes -->
<div className="fade-in-up">Aparecer</div>
<div className="shake">Erro</div>
```

---

## ğŸ“¦ DEPENDÃŠNCIAS (jÃ¡ instaladas)

```json
{
  "@supabase/supabase-js": "^2.39.0",
  "react": "^18.2.0",
  "react-router-dom": "^6.21.0",
  "framer-motion": "^10.18.0",
  "react-hot-toast": "^2.4.1",
  "zustand": "^4.4.7"
}
```

---

## ğŸ¯ OBJETIVO FINAL DA FASE 2

Ao final, devo ter:
- âœ… Sistema de login funcionando
- âœ… Cadastro de estudantes com BP
- âœ… Cadastro de visitantes com cÃ³digo
- âœ… VerificaÃ§Ã£o de email
- âœ… SessÃ£o persistente
- âœ… ValidaÃ§Ãµes completas
- âœ… UI bonita com animaÃ§Ãµes
- âœ… IntegraÃ§Ã£o total com Supabase

---

## ğŸš€ COMO PROCEDER

1. **Crie TODOS os arquivos listados** (auth.js, validators.js, useAuth.js, componentes, pÃ¡ginas)
2. **Separe cada arquivo** com comentÃ¡rios indicando o caminho
3. **Use as constantes** de `src/utils/constants.js`
4. **Siga o design** do tema verde IFSP + escuro
5. **Implemente validaÃ§Ãµes robustas**
6. **Adicione animaÃ§Ãµes** nos formulÃ¡rios
7. **Trate TODOS os erros** com mensagens amigÃ¡veis

---

## ğŸ’¡ DICAS

- Use `async/await` para chamadas Supabase
- Implemente loading states
- Mostre feedback visual em todas as aÃ§Ãµes
- Use React Hot Toast para notificaÃ§Ãµes
- Valide formulÃ¡rios em tempo real
- Adicione mÃ¡scaras de input quando necessÃ¡rio (BP, telefone, etc)

---

## âš ï¸ IMPORTANTE

- **NÃƒO** use localStorage diretamente (use Supabase Auth)
- **NÃƒO** armazene senhas em plain text
- **NÃƒO** use Tailwind CSS
- **SIM** use as classes do global.css
- **SIM** adicione comentÃ¡rios no cÃ³digo
- **SIM** trate todos os edge cases

---

## ğŸ¨ REFERÃŠNCIAS VISUAIS

Logo IFSP: https://bra.ifsp.edu.br/images/LogoIFSP/logoifspbra2.png

Cores:
- Verde principal: #0B6623
- Verde claro: #0E8B2F
- Verde escuro: #054A1A
- Fundo: #0F0F0F
- Cards: #1A1A1A

---

**PODE COMEÃ‡AR A FASE 2! ğŸš€**

Crie todos os arquivos necessÃ¡rios para o sistema de autenticaÃ§Ã£o completo. Lembre-se: cÃ³digo limpo, bem comentado e organizado!